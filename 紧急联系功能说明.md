# 紧急联系功能说明

## 功能概述

为地震预警应用新增了紧急联系功能，用户在地震发生时可以快速联系相关救援部门和紧急服务机构。

## 功能特点

### 1. 一键呼叫
- **快速访问**: 在地震信息卡片上点击红色"紧急联系"按钮
- **弹窗界面**: 屏幕中央弹出联系人选择界面
- **直接拨号**: 点击联系人即可直接拨打电话

### 2. 预设联系人
应用预设了以下紧急联系人：

#### 地方救援机构
- **杭州人防指挥信息保障中心**: 0571-87265799
- **红十字救援队**: 0571-87265773  
- **民间组织救援小组**: 13486660376

#### 国家紧急服务
- **消防救援**: 119
- **公安报警**: 110
- **医疗急救**: 120
- **地震局应急热线**: 12322

### 3. 界面设计
- **清晰布局**: 仿照您提供的设计稿，采用卡片式布局
- **蓝色主题**: 使用蓝色作为主色调，符合紧急服务的视觉规范
- **易于操作**: 大按钮设计，紧急情况下易于点击

## 技术实现

### 核心组件
- `EmergencyContactDialog`: 紧急联系弹窗组件
- `EmergencyContact`: 联系人数据模型
- `EmergencyContactType`: 联系人类型枚举

### 权限管理
- 添加了 `CALL_PHONE` 权限用于直接拨打电话
- 使用 `Intent.ACTION_DIAL` 安全地启动拨号界面

### 集成方式
- 集成到 `EarthquakeInfoCard` 组件中
- 通过状态管理控制弹窗显示/隐藏
- 无需额外的网络请求，本地数据即时响应

## 使用方法

### 1. 触发紧急联系
1. 当地震预警激活时，地震信息卡片会显示在屏幕底部
2. 点击卡片右上角的红色"紧急联系"按钮
3. 屏幕中央会弹出"选择呼叫单位"对话框

### 2. 选择联系人
1. 浏览预设的紧急联系人列表
2. 每个联系人显示名称和电话号码
3. 点击任意联系人或右侧的蓝色电话图标

### 3. 拨打电话
1. 系统会自动打开拨号应用
2. 电话号码已自动填入
3. 用户确认后即可拨打

### 4. 关闭弹窗
- 点击右上角的关闭按钮
- 点击底部的"取消"按钮
- 点击弹窗外部区域

## 安全考虑

### 1. 权限安全
- 使用 `ACTION_DIAL` 而非 `ACTION_CALL`
- 用户需要手动确认拨打，避免误拨

### 2. 数据安全
- 联系人信息本地存储，无网络传输风险
- 不收集用户通话记录或个人信息

### 3. 紧急响应
- 界面简洁明了，紧急情况下易于操作
- 预设权威机构联系方式，确保救援有效性

## 扩展功能

### 未来可能的增强
1. **地区定制**: 根据用户位置显示当地救援机构
2. **语音拨号**: 集成语音识别，支持语音拨号
3. **短信求助**: 添加短信求助功能
4. **位置共享**: 自动发送位置信息给救援机构
5. **联系人管理**: 允许用户添加自定义紧急联系人

## 测试建议

### 功能测试
1. 验证弹窗正常显示和隐藏
2. 测试所有联系人的拨号功能
3. 检查权限请求和处理
4. 验证界面在不同屏幕尺寸下的显示效果

### 用户体验测试
1. 模拟紧急情况下的操作流程
2. 测试按钮大小和点击区域
3. 验证界面响应速度
4. 检查文字清晰度和可读性

---

**注意**: 此功能仅在地震预警激活时可用，平时不会显示紧急联系按钮。请在实际部署前测试所有联系人电话的有效性。 